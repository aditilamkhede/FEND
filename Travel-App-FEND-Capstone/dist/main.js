!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return d}));let o="san jose",r="us",c="";const a="17496130-86911d19665df26c192b13e9a";let l,i=new Date,s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);function d(){console.log("In Init"),document.getElementById("generate").addEventListener("click",g);const e=document.getElementById("cityName"),t=document.querySelector("#country");t.addEventListener("change",u),e.addEventListener("keyup",function(e,t){let n;return(...o)=>{const r=this;clearTimeout(n),n=setTimeout(()=>e.apply(r,o),t)}}(()=>{console.log("Inside event listner call"),fetch(`http://api.geonames.org/searchJSON?q=${e.value}&username=aditilamkhede`).then(e=>e.json()).then(e=>{console.log(e),l=e.geonames.map(e=>[e.countryCode,e.countryName,e.adminCodes1?e.adminCodes1.ISO3166_2:e.adminCode1,e.adminName1]),console.log(l);(e=>{t.innerHTML="";const n=""+[...new Set(e.map(e=>`<option value="${e[0]}">${e[1]}</option>\n`))];console.log("optCountry",n),t.innerHTML=n.replace(/,/gi,""),t.selectedIndex=0,u()})(l)})},1e3))}function u(){console.log("onCountrySelect",l);const e=document.querySelector("#state"),t=document.querySelector("#country"),n=""+[...new Set(l.map(e=>e[0]==t.options[t.selectedIndex].value?`<option value="${e[2]}">${e[3]}</option>\n`:null))];e.innerHTML=n.replace(/,/gi,""),console.log("optState",n.replace(/,/gi,""))}function g(e){console.log("In click");const t=document.querySelector("#state"),n=document.querySelector("#country");o=document.getElementById("cityName").value;const l=document.getElementById("startDate");r=n.options[n.selectedIndex].value;const i=n.options[n.selectedIndex].text;c=t.options[t.selectedIndex].value,function(e,t){let n=document.getElementById("errorDt"),o=document.getElementById("errorZip");if(""===t||null===t)return console.log("Please enter valid trip start date."),void(n.innerHTML="Please enter valid trip start date.");n.innerHTML="";if(""===e||null===e)return console.log("Please enter valid cityName."),void(o.innerHTML="Please enter valid cityName code.");o.innerHTML=""}(o,l.value);const d=new Date(l.value);alert(d);const u=Math.round(Math.abs((d-s)/864e5));alert(u),m("http://api.geonames.org/searchJSON?q=",o,r,c,"aditilamkhede").then((function(e){console.log(e.geonames[0]);let t=[e.geonames[0].lat,e.geonames[0].lng,e.geonames[0].countryName];console.log(t);let n="https://api.weatherbit.io/v2.0/current?key=";u>1&&(n="https://api.weatherbit.io/v2.0/forecast/daily?key="),p(n,t[0],t[1],"5e91a20278054587941f9c330a3be04e",u).then((function(e){console.log("response",e.data);const t=function(e){let t=[];for(var n=0;n<e.length;n++){const o={temp:e[n].temp,date:e[n].datetime,icon:e[n].weather.icon,iconDesc:e[n].weather.description};t.push(o)}return t}(e.data);console.log("weatherDataArr - ",t),y("http://localhost:5000/weather",{weather:t}).then((function(){h("https://pixabay.com/api/?key=",o,a).then((function(e){let t="";console.log("resImg.hits",e.hits),console.log("resImg.hits.length",e.hits.length),e.hits.length>0?(t=e.hits[0].largeImageURL,console.log(t),f(t)):h("https://pixabay.com/api/?key=",i,a).then((function(e){t=e.hits[0].largeImageURL,console.log(t),f(t)}))}))}))}))}))}const m=async(e,t,n,o,r)=>{const c=`${e}${t}&country=${n}&adminCodes1=ISO3166_2:${o}&maxRows=1&username=${r}`;console.log(c);const a=await fetch(c);try{const e=await a.json();return console.log(e),e}catch(e){console.log("Error",e)}},p=async(e,t,n,o,r)=>{const c=`${e}${o}&lat=${t}&lon=${n}&units=i&days=${r}`;console.log(c);const a=await fetch(c);try{const e=await a.json();return console.log(e.data),e}catch(e){console.log("Error",e)}},h=async(e,t,n)=>{const o=`${e}${n}&q=${encodeURIComponent(t)}&image_type=photo&pretty=true`;console.log(o);const r=await fetch(o);try{const e=await r.json();return console.log(e.hits),e}catch(e){console.log("Error",e)}},y=async(e="",t={})=>{const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{return await n.json()}catch(e){console.log("Error",e)}};const f=async e=>{const t=await fetch("http://localhost:5000/all");try{const n=function(e){let t="";for(var n=0;n<e.length;n++)t+=`<div id="date">${e[n].date}</div>\n      <div id="temp">${e[n].temp}</div>\n      <div id="icon"><img height="50" width="50" alt="${e[n].iconDesc}"\n      src="https://www.weatherbit.io/static/img/icons/${e[n].icon}.png"></div>`;return t}((await t.json()).weather);console.log("imgURL",e),document.getElementById("entryHolder").innerHTML=n,document.body.style.background=`url(${e}) no-repeat center center fixed`}catch(e){console.log("Error - ",e)}};n(0);console.log("In export index check",d),window.addEventListener("DOMContentLoaded",d)}]);
//# sourceMappingURL=main.js.map